
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Python API &#8212; remake  documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Remake CLI" href="remake_cli.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="index.html">
<p class="title">remake</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="installation.html">
  Installation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="quickstart.html">
  Quickstart
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="remake_cli.html">
  Remake CLI
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Python API
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#remake-classes">
   Remake classes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-remake.util">
   remake.util
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="python-api">
<h1>Python API<a class="headerlink" href="#python-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="remake-classes">
<h2>Remake classes<a class="headerlink" href="#remake-classes" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="remake.Remake">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">remake.</span></span><span class="sig-name descname"><span class="pre">Remake</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">special_paths</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#remake.SpecialPaths" title="remake.special_paths.SpecialPaths"><span class="pre">remake.special_paths.SpecialPaths</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake" title="Permalink to this definition">¶</a></dt>
<dd><p>Core class. A remakefile is defined by creating an instance of Remake.</p>
<p>Acts as an entry point to running all tasks via python, and retrieving information about the state of any task.
Contains a list of all tasks added by any <cite>TaskRule</cite>.</p>
<p>A remakefile must contain:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">demo</span> <span class="o">=</span> <span class="n">Remake</span><span class="p">()</span>
</pre></div>
</div>
<p>This must be near the top of the file - after the imports but before any <cite>TaskRule</cite> is defined.</p>
<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.all_ancestors">
<span class="sig-name descname"><span class="pre">all_ancestors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.all_ancestors" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all ancestors of tasks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks</strong> – tasks to start from</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all ancestors</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.all_descendants">
<span class="sig-name descname"><span class="pre">all_descendants</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.all_descendants" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all descendants of tasks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks</strong> – tasks to start from</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all descendants</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.ancestors">
<span class="sig-name descname"><span class="pre">ancestors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.ancestors" title="Permalink to this definition">¶</a></dt>
<dd><p>All ancestors of a given task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> – task to start from</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all ancestors</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="remake.Remake.completed_tasks">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">completed_tasks</span></span><a class="headerlink" href="#remake.Remake.completed_tasks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.configure">
<span class="sig-name descname"><span class="pre">configure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">print_reasons</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow Remake object to be configured after creation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>print_reasons</strong> – print reason for running individual task</p></li>
<li><p><strong>executor</strong> – name of which <cite>remake.executor</cite> to use</p></li>
<li><p><strong>display</strong> – how to display task status after each task is run</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="remake.Remake.current_remake">
<span class="sig-name descname"><span class="pre">current_remake</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#remake.Remake.current_remake" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.descendants">
<span class="sig-name descname"><span class="pre">descendants</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.descendants" title="Permalink to this definition">¶</a></dt>
<dd><p>All descendants of a given task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> – task to start from</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all descendants</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.display_task_dag">
<span class="sig-name descname"><span class="pre">display_task_dag</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.display_task_dag" title="Permalink to this definition">¶</a></dt>
<dd><p>Display all tasks as a Directed Acyclic Graph (DAG)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.file_info">
<span class="sig-name descname"><span class="pre">file_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filenames</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.file_info" title="Permalink to this definition">¶</a></dt>
<dd><p>File info for all given files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filenames</strong> – filenames to get info for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict containing all info</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.finalize">
<span class="sig-name descname"><span class="pre">finalize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize this Remake object</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="remake.Remake.finalized">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">finalized</span></span><a class="headerlink" href="#remake.Remake.finalized" title="Permalink to this definition">¶</a></dt>
<dd><p>Is this finalized (i.e. ready to be run)?</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.find_task">
<span class="sig-name descname"><span class="pre">find_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_path_hash_key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">remake.task.Task</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.find_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a task from its path_hash_key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task_path_hash_key</strong> – key of task</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>found task</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.find_tasks">
<span class="sig-name descname"><span class="pre">find_tasks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_path_hash_keys</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.find_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all tasks given by their path hash keys</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task_path_hash_keys</strong> – list of path hash keys</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all found tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.list_files">
<span class="sig-name descname"><span class="pre">list_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filetype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exists</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">produced_by_rule</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">used_by_rule</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">produced_by_task</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">used_by_task</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.list_files" title="Permalink to this definition">¶</a></dt>
<dd><p>List all files subject to criteria.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filetype</strong> – one of input_only, output_only, input, output, inout</p></li>
<li><p><strong>exists</strong> – whether file exists</p></li>
<li><p><strong>produced_by_rule</strong> – whether file is produced by rule</p></li>
<li><p><strong>used_by_rule</strong> – whether file is used by rule</p></li>
<li><p><strong>produced_by_task</strong> – whether file is produced by task (path hash key)</p></li>
<li><p><strong>used_by_task</strong> – whether file is used by task (path hash key)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all matching files</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.list_rules">
<span class="sig-name descname"><span class="pre">list_rules</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.list_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>List all rules</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.list_tasks">
<span class="sig-name descname"><span class="pre">list_tasks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tfilter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rule</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">requires_rerun</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uses_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">produces_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ancestor_of</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">descendant_of</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.list_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>List all tasks subject to requirements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tfilter</strong> – dict of key/value pairs to filter tasks on</p></li>
<li><p><strong>rule</strong> – rule that tasks belongs to</p></li>
<li><p><strong>requires_rerun</strong> – whether tasks require rerun</p></li>
<li><p><strong>uses_file</strong> – whether tasks use a given file</p></li>
<li><p><strong>produces_file</strong> – whether tasks produce a given file</p></li>
<li><p><strong>ancestor_of</strong> – whether tasks are an ancestor of this task (path hash key)</p></li>
<li><p><strong>descendant_of</strong> – whether tasks are a descendant of this task (path hash key)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>all matching tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="remake.Remake.name">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#remake.Remake.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="remake.Remake.pending_tasks">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">pending_tasks</span></span><a class="headerlink" href="#remake.Remake.pending_tasks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="remake.Remake.remaining_tasks">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">remaining_tasks</span></span><a class="headerlink" href="#remake.Remake.remaining_tasks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="remake.Remake.remakes">
<span class="sig-name descname"><span class="pre">remakes</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#remake.Remake.remakes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.rerun_required">
<span class="sig-name descname"><span class="pre">rerun_required</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.rerun_required" title="Permalink to this definition">¶</a></dt>
<dd><p>Rerun status of this Remake object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if any tasks remain to be run</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the internal state</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.run_all">
<span class="sig-name descname"><span class="pre">run_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.run_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>force</strong> – force rerun of each task</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.run_one">
<span class="sig-name descname"><span class="pre">run_one</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.run_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the next pending task</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.run_random">
<span class="sig-name descname"><span class="pre">run_random</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.run_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a random task (pot luck out of pending)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.run_requested">
<span class="sig-name descname"><span class="pre">run_requested</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">requested</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">handle_dependencies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.run_requested" title="Permalink to this definition">¶</a></dt>
<dd><p>Run requested tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>requested</strong> – </p></li>
<li><p><strong>force</strong> – force rerun of each task</p></li>
<li><p><strong>handle_dependencies</strong> – add all ancestor tasks to ensure given tasks can be run</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.short_status">
<span class="sig-name descname"><span class="pre">short_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'logger.info'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.short_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Log/print a short status line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> – ‘logger.info’ or ‘print’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.task_info">
<span class="sig-name descname"><span class="pre">task_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_path_hash_keys</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.Remake.task_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Task info for all given tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task_path_hash_keys</strong> – task hash keys for tasks</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict containing all info</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.Remake.task_status">
<span class="sig-name descname"><span class="pre">task_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">remake.task.Task</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="headerlink" href="#remake.Remake.task_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the status of a task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> – task to get status for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>status</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="remake.SpecialPaths">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">remake.</span></span><span class="sig-name descname"><span class="pre">SpecialPaths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">paths</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.SpecialPaths" title="Permalink to this definition">¶</a></dt>
<dd><p>Special paths to use for all input/output filenames.</p>
<p>When tasks use inputs or create outputs, they are referenced by their filesystem path.
This class makes it easy to define special paths that are used internally to locate the actual file.
For example, <cite>CWD</cite> is a special path for the current working directory.
This can be used to make paths consistent across different machine. If machine A has a file at path /A/data/path,
and machine B has a file at path /B/data/path, a special path called <cite>DATA</cite> could be set up, pointing to the right
path on each machine. E.g. on machine A:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">special_paths</span> <span class="o">=</span> <span class="n">SpecialPaths</span><span class="p">(</span><span class="n">DATA</span><span class="o">=</span><span class="s1">&#39;/A/data&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">special_paths</span><span class="o">.</span><span class="n">DATA</span>
<span class="go">PosixPath(&#39;/A/data&#39;)</span>
</pre></div>
</div>
<p>This must be passed into <cite>Remake</cite> to take effect:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">remake</span> <span class="kn">import</span> <span class="n">Remake</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">demo</span> <span class="o">=</span> <span class="n">Remake</span><span class="p">(</span><span class="n">special_paths</span><span class="o">=</span><span class="n">special_paths</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="remake.TaskRule">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">remake.</span></span><span class="sig-name descname"><span class="pre">TaskRule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_ctrl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depends_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.TaskRule" title="Permalink to this definition">¶</a></dt>
<dd><p>Core class. Defines a set of tasks in a remakefile.</p>
<p>Each class must have class-level properties: rule_inputs, rule_outputs, and each must have a method: rule_run.
Each output file must be unique within a remakefile.
In the rule_run method, the inputs and outputs are available through e.g. the self.inputs property.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">demo</span> <span class="o">=</span> <span class="n">Remake</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">TaskSet</span><span class="p">(</span><span class="n">TaskRule</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">rule_inputs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;in&#39;</span><span class="p">:</span> <span class="s1">&#39;infile&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="n">rule_outputs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;out&#39;</span><span class="p">:</span> <span class="s1">&#39;outfile&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">rule_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s1">&#39;out&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">TaskSet</span><span class="o">.</span><span class="n">tasks</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Each class can also optionally define a var_matrix, and dependency functions/classes. <cite>var_matrix</cite> should be
a dict with string keys, and a list of items for each key. There will be as many tasks created as the
<cite>itertools.product</cite> between the lists for each key. The values will be substituted in to the inputs/outputs.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">fn</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;in fn&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">TaskSet2</span><span class="p">(</span><span class="n">TaskRule</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">rule_inputs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;in&#39;</span><span class="p">:</span> <span class="s1">&#39;infile&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="n">rule_outputs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;out_</span><span class="si">{i}{j}</span><span class="s1">&#39;</span><span class="p">:</span> <span class="s1">&#39;outfile_</span><span class="si">{i}{j}</span><span class="s1">&#39;</span><span class="p">}</span>
<span class="gp">... </span>    <span class="n">var_matrix</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;i&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;j&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]}</span>
<span class="gp">... </span>    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span><span class="n">fn</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">rule_run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">fn</span><span class="p">()</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;out_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="s1">&#39;in&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">TaskSet2</span><span class="o">.</span><span class="n">tasks</span><span class="p">)</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Note, all tasks created by these <cite>TaskRule</cite> are added to the <cite>Remake</cite> object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">tasks</span><span class="p">)</span>
<span class="go">5</span>
</pre></div>
</div>
<p>When the remakefile is run (<cite>$ remake run</cite> on the command line), all the tasks will be triggered according to their
ordering. If any of the rule_run methods is changed, then those tasks will be rerun, and if their output is
is different subsequent tasks will be rerun.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="remake.TaskQuerySet">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">remake.</span></span><span class="sig-name descname"><span class="pre">TaskQuerySet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_ctrl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.TaskQuerySet" title="Permalink to this definition">¶</a></dt>
<dd><p>List of classes with some extra capabilities.</p>
<p>Provides some simple methods for filtering, running and displaying the status of all its tasks.</p>
<dl class="py method">
<dt class="sig sig-object py" id="remake.TaskQuerySet.exclude">
<span class="sig-name descname"><span class="pre">exclude</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.TaskQuerySet.exclude" title="Permalink to this definition">¶</a></dt>
<dd><p>As <cite>filter</cite>, but exclude instead of include tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – key-value pairs to exclude</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>filtered tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.TaskQuerySet.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cast_to_str</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.TaskQuerySet.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter tasks based on kwargs.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">DummyTask</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">task</span> <span class="o">=</span> <span class="n">DummyTask</span><span class="p">()</span>
<span class="gp">... </span>    <span class="nb">setattr</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">setattr</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="s1">&#39;j&#39;</span><span class="p">,</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task_query_set</span> <span class="o">=</span> <span class="n">TaskQuerySet</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">task_query_set</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">4</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cast_to_str</strong> – Cast values to string first</p></li>
<li><p><strong>kwargs</strong> – key-value pairs of task properties</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>filtered TaskQuerySet</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.TaskQuerySet.first">
<span class="sig-name descname"><span class="pre">first</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#remake.TaskQuerySet.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Get first task.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.TaskQuerySet.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.TaskQuerySet.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get one and only one task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> – key-value pairs to get</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>task meeting criteria</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.TaskQuerySet.in_rule">
<span class="sig-name descname"><span class="pre">in_rule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rule</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.TaskQuerySet.in_rule" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter all tasks to those in provided rule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rule</strong> – rule to filter on</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>filtered TaskQuerySet</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.TaskQuerySet.last">
<span class="sig-name descname"><span class="pre">last</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#remake.TaskQuerySet.last" title="Permalink to this definition">¶</a></dt>
<dd><p>Get last task.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.TaskQuerySet.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.TaskQuerySet.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>force</strong> – force run</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="remake.TaskQuerySet.status">
<span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reasons</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_diff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.TaskQuerySet.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Print status for all tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reasons</strong> – show reasons for why tasks have their statuses</p></li>
<li><p><strong>task_diff</strong> – show a diff of the tasks’ rule_run methods</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-remake.util">
<span id="remake-util"></span><h2>remake.util<a class="headerlink" href="#module-remake.util" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="remake.util.format_path">
<span class="sig-prename descclassname"><span class="pre">remake.util.</span></span><span class="sig-name descname"><span class="pre">format_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pathlib.Path</span><a class="headerlink" href="#remake.util.format_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a path based on <cite>**kwargs</cite>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">format_path</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;some/path/</span><span class="si">{dirname}</span><span class="s1">/</span><span class="si">{filename}</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">dirname</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;out.txt&#39;</span><span class="p">)</span>
<span class="go">PosixPath(&#39;some/path/output/out.txt&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – path with python format-style braces</p></li>
<li><p><strong>kwargs</strong> – keyword args to substitute</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>formatted path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="remake.util.load_module">
<span class="sig-prename descclassname"><span class="pre">remake.util.</span></span><span class="sig-name descname"><span class="pre">load_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_filename</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.util.load_module" title="Permalink to this definition">¶</a></dt>
<dd><p>Use Python internals to load a Python module from a filename.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">load_module</span><span class="p">(</span><span class="s1">&#39;examples/ex1.py&#39;</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;ex1&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>local_filename</strong> – name of module to load</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>module</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="remake.util.sha1sum">
<span class="sig-prename descclassname"><span class="pre">remake.util.</span></span><span class="sig-name descname"><span class="pre">sha1sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buf_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">65536</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="headerlink" href="#remake.util.sha1sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate sha1 sum for a path.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sha1sum</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;examples/data/in.txt&#39;</span><span class="p">))</span>
<span class="go">&#39;3620f0704e803d65098e5f2b836633b166e25474&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – file path to calculate sha1 sum for</p></li>
<li><p><strong>buf_size</strong> – buffer size for reading file</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>sha1 sum of input path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="remake.util.sysrun">
<span class="sig-prename descclassname"><span class="pre">remake.util.</span></span><span class="sig-name descname"><span class="pre">sysrun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#remake.util.sysrun" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a system command, returns a CompletedProcess</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sysrun</span><span class="p">(</span><span class="s1">&#39;echo &quot;hello&quot;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go">hello</span>
</pre></div>
</div>
<p>raises CalledProcessError if cmd is bad.
to access output: sysrun(cmd).stdout</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="remake.util.tmp_to_actual_path">
<span class="sig-prename descclassname"><span class="pre">remake.util.</span></span><span class="sig-name descname"><span class="pre">tmp_to_actual_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pathlib.Path</span><a class="headerlink" href="#remake.util.tmp_to_actual_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a temporary remake path to an actual path.</p>
<p>When writing to an output path, remake uses a temporary path then copies to the actual path on completion.
This function can be used to see the actual path from the temporary path.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tmp_to_actual_path</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;.remake.tmp.output.txt&#39;</span><span class="p">))</span>
<span class="go">PosixPath(&#39;output.txt&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – temporary remake path</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>actual path</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="remake_cli.html" title="previous page">Remake CLI</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Mark Muetzelfeldt.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.2.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>